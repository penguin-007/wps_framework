$(document).ready(function(){

  // wps_form
  $("body").on( "submit", ".wps_form_js", function(){
    var form        = $(this);
    var btn_submit  = form.find('[type=submit]');

    var data = new FormData($(this)[0]);
    data.append("action", "wps_form_send");

    $.ajax({
      url : theme_ajax.url, 
      type: 'POST', 
      data: data,
      dataType:'json',
      processData: false,
      contentType: false,
      beforeSend: function(xhr){ 
        form.addClass('sending');
        btn_submit.addClass('sending');
      },
      success: function(data) {
        form.trigger('reset');
        // if redirect
        if( data.g_error ){ 
          console.log(data.g_error); 
        } else if ( data.location ) {
          // if redirect
          window.location.replace(data.location+"/");
        } else {
          if ( btn_submit ) {
            console.log(data.success);
          }
          // clear sending
          form.removeClass('sending');
          btn_submit.removeClass('sending');
          // mark success
          form.addClass('success');
          btn_submit.addClass('success');
          // clear succes
          setTimeout(function(){
            form.removeClass('success');
            btn_submit.removeClass('success');
          }, 2500);
        }
      },
      error: function(data){
        console.log("Mail ajax error");
      }
    });
    return false;
  });
  
});